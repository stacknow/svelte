import{a as C,t as R,d as ne,c as Se}from"../chunks/disclose-version.BE0vd8Of.js";import{d as yt,g as gt,h as q,l as ue,W as bt,V as xt,ap as tt,Y as wt,Z as Te,k as ve,m as Z,aA as le,_ as at,a0 as rt,a1 as kt,R as Pe,aB as At,ao as Et,aC as Mt,ay as Lt,o as St,al as Tt,ag as Pt,ah as zt,aD as we,aE as ze,aF as ke,y as Ct,O as Ce,aG as st,aH as Ht,aI as Nt,j as jt,at as Wt,w as Ut,au as It,J as Dt,b as Ot,p as Rt,ax as Ft,z as o,v as qt,s as D,f as $,t as K,a as Jt,aJ as Bt,$ as Kt,c as F,K as N,A as be,r as I}from"../chunks/runtime.BZuW5zuQ.js";import{d as Qt,e as Vt,s as ee}from"../chunks/render.DKjFYLX0.js";import{p as Yt,a as xe,i as Y}from"../chunks/props.DI0Qgd78.js";import{h as Gt}from"../chunks/svelte-head.KbhAMG9f.js";import{r as Xt,a as He,s as Ne}from"../chunks/attributes.C048FCnv.js";import{s as Zt,a as $t}from"../chunks/store.kAC3XHO5.js";import{a as ea,b as ta,i as aa,c as ra}from"../chunks/entry.BndfiRUm.js";import{r as sa}from"../chunks/index.ykvBoqA4.js";function je(t,e){return e}function na(t,e,a,s){for(var n=[],m=e.length,f=0;f<m;f++)At(e[f].e,n,!0);var g=m>0&&n.length===0&&a!==null;if(g){var _=a.parentNode;Et(_),_.append(a),s.clear(),B(t,e[0].prev,e[m-1].next)}Mt(n,()=>{for(var E=0;E<m;E++){var b=e[E];g||(s.delete(b.k),B(t,b.prev,b.next)),Lt(b.e,!g)}})}function ie(t,e,a,s,n,m=null){var f=t,g={flags:e,items:new Map,first:null},_=(e&st)!==0;if(_){var E=t;f=q?ue(St(E)):E.appendChild(yt())}q&&bt();var b=null,S=!1;gt(()=>{var T=a(),u=xt(T)?T:T==null?[]:tt(T),d=u.length;if(S&&d===0)return;S=d===0;let h=!1;if(q){var H=f.data===wt;H!==(d===0)&&(f=Te(),ue(f),ve(!1),h=!0)}if(q){for(var x=null,k,v=0;v<d;v++){if(Z.nodeType===8&&Z.data===Tt){f=Z,h=!0,ve(!1);break}var l=u[v],c=s(l,v);k=nt(Z,g,x,null,l,c,v,n,e),g.items.set(c,k),x=k}d>0&&ue(Te())}if(!q){var r=Pt;ia(u,g,f,n,e,(r.f&le)!==0,s)}m!==null&&(d===0?b?at(b):b=rt(()=>m(f)):b!==null&&kt(b,()=>{b=null})),h&&ve(!0),a()}),q&&(f=Z)}function ia(t,e,a,s,n,m,f,g){var L,z,j,X;var _=(n&Ht)!==0,E=(n&(we|ke))!==0,b=t.length,S=e.items,T=e.first,u=T,d,h=null,H,x=[],k=[],v,l,c,r;if(_)for(r=0;r<b;r+=1)v=t[r],l=f(v,r),c=S.get(l),c!==void 0&&((L=c.a)==null||L.measure(),(H??(H=new Set)).add(c));for(r=0;r<b;r+=1){if(v=t[r],l=f(v,r),c=S.get(l),c===void 0){var i=u?u.e.nodes_start:a;h=nt(i,e,h,h===null?e.first:h.next,v,l,r,s,n),S.set(l,h),x=[],k=[],u=h.next;continue}if(E&&oa(c,v,r,n),c.e.f&le&&(at(c.e),_&&((z=c.a)==null||z.unfix(),(H??(H=new Set)).delete(c))),c!==u){if(d!==void 0&&d.has(c)){if(x.length<k.length){var p=k[0],y;h=p.prev;var M=x[0],A=x[x.length-1];for(y=0;y<x.length;y+=1)We(x[y],p,a);for(y=0;y<k.length;y+=1)d.delete(k[y]);B(e,M.prev,A.next),B(e,h,M),B(e,A,p),u=p,h=A,r-=1,x=[],k=[]}else d.delete(c),We(c,u,a),B(e,c.prev,c.next),B(e,c,h===null?e.first:h.next),B(e,h,c),h=c;continue}for(x=[],k=[];u!==null&&u.k!==l;)(m||!(u.e.f&le))&&(d??(d=new Set)).add(u),k.push(u),u=u.next;if(u===null)continue;c=u}x.push(c),h=c,u=c.next}if(u!==null||d!==void 0){for(var w=d===void 0?[]:tt(d);u!==null;)(m||!(u.e.f&le))&&w.push(u),u=u.next;var P=w.length;if(P>0){var W=n&st&&b===0?a:null;if(_){for(r=0;r<P;r+=1)(j=w[r].a)==null||j.measure();for(r=0;r<P;r+=1)(X=w[r].a)==null||X.fix()}na(e,w,W,S)}}_&&zt(()=>{var ae;if(H!==void 0)for(c of H)(ae=c.a)==null||ae.apply()}),Pe.first=e.first&&e.first.e,Pe.last=h&&h.e}function oa(t,e,a,s){s&we&&ze(t.v,e),s&ke?ze(t.i,a):t.i=a}function nt(t,e,a,s,n,m,f,g,_,E){var b=(_&we)!==0,S=(_&Nt)===0,T=b?S?Ct(n):Ce(n):n,u=_&ke?Ce(f):f,d={i:u,v:T,k:m,a:null,e:null,prev:a,next:s};try{return d.e=rt(()=>g(t,T,u),q),d.e.prev=a&&a.e,d.e.next=s&&s.e,a===null?e.first=d:(a.next=d,a.e.next=d.e),s!==null&&(s.prev=d,s.e.prev=d.e),d}finally{}}function We(t,e,a){for(var s=t.next?t.next.e.nodes_start:a,n=e?e.e.nodes_start:a,m=t.e.nodes_start;m!==s;){var f=jt(m);n.before(m),m=f}}function B(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function Ue(t,e,a){Wt(()=>{var s=Ut(()=>e(t,a==null?void 0:a())||{});if(a&&(s!=null&&s.update)){var n=!1,m={};It(()=>{var f=a();Dt(f),n&&Ot(m,f)&&(m=f,s.update(f))}),n=!0}if(s!=null&&s.destroy)return()=>s.destroy()})}function it(t){var e,a,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(e=0;e<n;e++)t[e]&&(a=it(t[e]))&&(s&&(s+=" "),s+=a)}else for(a in t)t[a]&&(s&&(s+=" "),s+=a);return s}function la(){for(var t,e,a=0,s="",n=arguments.length;a<n;a++)(t=arguments[a])&&(e=it(t))&&(s&&(s+=" "),s+=e);return s}function ca(t){return typeof t=="object"?la(t):t??""}function fa(t,e,a){var s=t.__className,n=da(e,a);q&&t.className===n?t.__className=n:(s!==n||q&&t.className!==n)&&(t.className=n,t.__className=n)}function da(t,e){return(t??"")+(" "+e)}function J(t,e,a){if(a){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function ua(t){const e=JSON.parse(t);return e.data&&(e.data=ea(e.data,ta.decoders)),e}function me(t){return HTMLElement.prototype.cloneNode.call(t)}function pe(t,e=()=>{}){const a=async({action:n,result:m,reset:f=!0,invalidateAll:g=!0})=>{m.type==="success"&&(f&&HTMLFormElement.prototype.reset.call(t),g&&await aa()),(location.origin+location.pathname===n.origin+n.pathname||m.type==="redirect"||m.type==="error")&&ra(m)};async function s(n){var h,H,x,k,v;if(((h=n.submitter)!=null&&h.hasAttribute("formmethod")?n.submitter.formMethod:me(t).method)!=="post")return;n.preventDefault();const f=new URL((H=n.submitter)!=null&&H.hasAttribute("formaction")?n.submitter.formAction:me(t).action),g=(x=n.submitter)!=null&&x.hasAttribute("formenctype")?n.submitter.formEnctype:me(t).enctype,_=new FormData(t),E=(k=n.submitter)==null?void 0:k.getAttribute("name");E&&_.append(E,((v=n.submitter)==null?void 0:v.getAttribute("value"))??"");const b=new AbortController;let S=!1;const u=await e({action:f,cancel:()=>S=!0,controller:b,formData:_,formElement:t,submitter:n.submitter})??a;if(S)return;let d;try{const l=new Headers({accept:"application/json","x-sveltekit-action":"true"});g!=="multipart/form-data"&&l.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(g)?g:"application/x-www-form-urlencoded");const c=g==="multipart/form-data"?_:new URLSearchParams(_),r=await fetch(f,{method:"POST",headers:l,cache:"no-store",body:c,signal:b.signal});d=ua(await r.text()),d.type==="error"&&(d.status=r.status)}catch(l){if((l==null?void 0:l.name)==="AbortError")return;d={type:"error",error:l}}u({action:f,formData:_,formElement:t,update:l=>a({action:f,result:d,reset:l==null?void 0:l.reset,invalidateAll:l==null?void 0:l.invalidateAll}),result:d})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",s),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",s)}}}var Ie="mz3PUW_p",De=["#FFC700","#FF0000","#2E3191","#41BBC7"],Oe=3500,Re=.5,Fe=150,qe="mix",Je=12,Be="",Ke=!0,Qe=800,Ve=1600;function he(t,e={}){let{colors:a=De,duration:s=Oe,force:n=Re,particleCount:m=Fe,particleShape:f=qe,particleSize:g=Je,particleClass:_=Be,destroyAfterDone:E=Ke,stageHeight:b=Qe,stageWidth:S=Ve}=e;(function(v){if(document.querySelector("style[data-neoconfetti]"))return;const l=_e("style");l.dataset.neoconfetti="",l.textContent=v,ye(document.head,l)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),t.classList.add("mz3PUW_c"),t.style.setProperty("--sh",b+"px");let T=[],u=[];const d=()=>te(O()*(_a-1)),h=(v,l)=>f!=="rectangles"&&(v==="circles"||ya(l));function H(v,l){const c=d(),r=h(f,c),i=(M,A)=>v.style.setProperty(M,A+"");i("--xlp",ge(oe(Ze(l,90)-180),0,180,-S/2,S/2)+"px"),i("--dc",s-te(1e3*O())+"ms");const p=O()<ma?G(O()*pa,2):0;i("--x1",p),i("--x2",-1*p),i("--x3",p),i("--x4",G(oe(ge(oe(Ze(l,90)-180),0,180,-1,1)),4)),i("--y1",G(O()*Ge,4)),i("--y2",G(O()*n*(ot()?1:-1),4)),i("--y3",Ge),i("--y4",G(ha(ge(oe(l-180),0,180,n,-n),0),4)),i("--w",(r?g:te(4*O())+g/2)+"px"),i("--h",(r?g:te(2*O())+g)+"px");const y=c.toString(2).padStart(3,"0").split("");i("--hr",y.map(M=>+M/2+"").join(" ")),i("--r",y.join(" ")),i("--rd",G(O()*(va-Ye)+Ye)+"ms"),i("--br",r?"50%":0)}let x;function k(){t.innerHTML="",clearTimeout(x),T=Xe(m,a),u=function(v,l=[],c){const r=[];for(const{color:i}of l){const p=_e("div");p.className=`${Ie} ${c}`,p.style.setProperty("--bgc",i);const y=_e("div");ye(p,y),ye(v,p),r.push(p)}return r}(t,T,_);for(const[v,l]of $e(u))H(l,T[+v].degree);x=setTimeout(()=>{E&&(t.innerHTML="")},s)}return k(),{update(v){const l=v.particleCount??Fe,c=v.particleShape??qe,r=v.particleSize??Je,i=v.particleClass??Be,p=v.colors??De,y=v.stageHeight??Qe,M=v.duration??Oe,A=v.force??Re,w=v.stageWidth??Ve,P=v.destroyAfterDone??Ke;T=Xe(l,p);let W=!1;if(l===m){u=Array.from(t.querySelectorAll(`.${Ie}`));for(const[L,{color:z}]of $e(T)){const j=u[+L];JSON.stringify(a)!==JSON.stringify(p)&&j.style.setProperty("--bgc",z),c!==f&&j.style.setProperty("--br",h(c,d())?"50%":"0"),i!==_&&(_&&j.classList.remove(_),i&&j.classList.add(i))}}else W=!0;E&&!P&&clearTimeout(x),t.style.setProperty("--sh",y+"px"),s=M,a=p,n=A,m=l,f=c,g=r,_=i,E=P,b=y,S=w,W&&k()},destroy(){t.innerHTML="",clearTimeout(x)}}}var Ye=200,va=800,ma=.1,pa=.3,Ge=.5,oe=Math.abs,O=Math.random,te=Math.round,ha=Math.max,_e=t=>document.createElement(t),ye=(t,e)=>t.appendChild(e),Xe=(t,e)=>Array.from({length:t},(a,s)=>({color:e[s%e.length],degree:360*s/t})),G=(t,e=2)=>te((t+Number.EPSILON)*10**e)/10**e,ge=(t,e,a,s,n)=>(t-e)*(n-s)/(a-e)+s,Ze=(t,e)=>t+e>360?t+e-360:t+e,ot=()=>O()>.5,$e=Object.entries,_a=6,ya=t=>t!==1&&ot();const lt="(prefers-reduced-motion: reduce)",ga=()=>window.matchMedia(lt).matches,ba=sa(ga(),t=>{{const e=s=>{t(s.matches)},a=window.matchMedia(lt);return a.addEventListener("change",e),()=>{a.removeEventListener("change",e)}}});function et(t,e,a){var n;t.preventDefault();const s=t.target.getAttribute("data-key");s==="backspace"?(be(e,xe(o(e).slice(0,-1))),(n=a())!=null&&n.badGuess&&a(a().badGuess=!1,!0)):o(e).length<5&&be(e,o(e)+s)}var xa=R('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),wa=R('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),ka=R('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',1),Aa=R('<p class="svelte-1pg2j5l"> </p>'),Ea=R('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Ma=R('<button formaction="?/update" name="key"> </button>'),La=R('<div class="row svelte-1pg2j5l"></div>'),Sa=R('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Ta=R('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Pa=R('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Oa(t,e){Rt(e,!0);const a=Zt(),s=()=>$t(ba,"$reducedMotion",a);let n=Yt(e,"form",15),m=N(()=>e.data.answers.at(-1)==="xxxxx"),f=N(()=>o(m)?-1:e.data.answers.length),g=Ft(xe(e.data.guesses[o(f)]||""));qt(()=>{be(g,xe(e.data.guesses[o(f)]||""))});let _=N(()=>o(g).length===5);const E=N(()=>{let r={},i={};return e.data.answers.forEach((p,y)=>{const M=e.data.guesses[y];for(let A=0;A<5;A+=1){const w=M[A];p[A]==="x"?(r[w]="exact",i[w]="correct"):r[w]||(r[w]=p[A]==="c"?"close":"missing",i[w]=p[A]==="c"?"present":"absent")}}),{classnames:r,description:i}}),b=N(()=>o(E).classnames),S=N(()=>o(E).description);function T(r){var i;r.metaKey||r.key==="Enter"&&!o(_)||(i=document.querySelector(`[data-key="${r.key}" i]`))==null||i.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}var u=Pa();Vt("keydown",Bt,T),Gt(r=>{var i=xa();Kt.title="Sverdle",C(r,i)});var d=D($(u),2),h=D(F(d),2);ie(h,20,()=>Array.from(Array(6).keys()),r=>r,(r,i)=>{var p=ka();const y=N(()=>i===o(f));var M=$(p),A=F(M);I(M);var w=D(M,2);ie(w,20,()=>Array.from(Array(5).keys()),P=>P,(P,W)=>{var L=wa();const z=N(()=>o(y)?o(g):e.data.guesses[i]),j=N(()=>{var U;return(U=e.data.answers[i])==null?void 0:U[W]}),X=N(()=>{var U;return((U=o(z))==null?void 0:U[W])??""}),ae=N(()=>o(y)&&W===o(z).length),Ae=N(()=>o(j)==="x"),Ee=N(()=>o(j)==="c"),Me=N(()=>o(j)==="_");var Le=F(L),ce=D(Le),ct=F(ce);{var ft=U=>{var re=ne("(correct)");C(U,re)},dt=U=>{var re=Se(),ut=$(re);{var vt=Q=>{var se=ne("(present)");C(Q,se)},mt=Q=>{var se=Se(),pt=$(se);{var ht=V=>{var de=ne("(absent)");C(V,de)},_t=V=>{var de=ne("empty");C(V,de)};Y(pt,V=>{o(Me)?V(ht):V(_t,!1)},!0)}C(Q,se)};Y(ut,Q=>{o(Ee)?Q(vt):Q(mt,!1)},!0)}C(U,re)};Y(ct,U=>{o(Ae)?U(ft):U(dt,!1)})}I(ce);var fe=D(ce,2);Xt(fe),I(L),K(()=>{J(L,"exact",o(Ae)),J(L,"close",o(Ee)),J(L,"missing",o(Me)),J(L,"selected",o(ae)),ee(Le,`${o(X)??""} `),fe.disabled=!o(y),He(fe,o(X))}),C(P,L)}),I(w),K(()=>{ee(A,`Row ${i+1}`),J(w,"current",o(y))}),C(r,p)}),I(h);var H=D(h,2),x=F(H);{var k=r=>{var i=Ea(),p=$(i);{var y=w=>{var P=Aa(),W=F(P);I(P),K(()=>ee(W,`the answer was "${e.data.answer??""}"`)),C(w,P)};Y(p,w=>{!o(m)&&e.data.answer&&w(y)})}var M=D(p,2),A=F(M);I(M),K(()=>ee(A,`${(o(m)?"you won :)":"game over :(")??""} play again?`)),C(r,i)},v=r=>{var i=Sa(),p=F(i),y=D(p,2);y.__click=[et,g,n];var M=D(y,2);ie(M,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],je,(A,w)=>{var P=La();ie(P,21,()=>w,je,(W,L)=>{var z=Ma();z.__click=[et,g,n];var j=F(z,!0);I(z),K(()=>{Ne(z,"data-key",o(L)),fa(z,ca(o(b)[o(L)]),"svelte-1pg2j5l"),z.disabled=o(_),He(z,o(L)),Ne(z,"aria-label",`${o(L)??""} ${(o(S)[o(L)]||"")??""}`),ee(j,o(L))}),C(W,z)}),I(P),C(A,P)}),I(i),K(()=>{p.disabled=!o(_),J(p,"selected",o(_))}),C(r,i)};Y(x,r=>{o(m)||e.data.answers.length>=6?r(k):r(v,!1)})}I(H),I(d),Ue(d,(r,i)=>pe==null?void 0:pe(r,i),()=>()=>({update:r})=>{r({reset:!1})});var l=D(d,2);{var c=r=>{var i=Ta();Ue(i,(p,y)=>he==null?void 0:he(p,y),()=>({particleCount:s()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),C(r,i)};Y(l,r=>{o(m)&&r(c)})}K(()=>{var r;J(h,"playing",!o(m)),J(h,"bad-guess",(r=n())==null?void 0:r.badGuess)}),C(t,u),Jt()}Qt(["click"]);export{Oa as component};
